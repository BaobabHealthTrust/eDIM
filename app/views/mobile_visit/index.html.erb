<%= javascript_include_tag 'jquery.dataTables.min.js' %>

<style type="text/css">
  .even{
    background-color: #CCCCCC !important;
  }
  input,label{
    margin-top: 5px;
    font-size: 25px;
  }

</style>
<script type="text/javascript">
  // Styling the table with datatables library
  $(document).ready(function() {
    // $.fn.dataTable.moment( 'MMM-YYYY' );
    $('#mobilevisits').DataTable({"bLengthChange": false, "bDestroy": true, "pageLength":5});
    search_box = $('#generalInventory').dataTable()
    search = document.getElementsByTagName("input")[0];
    search.setAttribute("id","search");
    document.getElementById('search').setAttribute("onclick","showKeyboard();");
    keyboard = document.getElementsByClassName("keypad")[0]
    showAlphaKeypad();
  } );


</script>

<div style="height: 8vh;border: 1px inset black; border-width: 0px 0px 3px 0px;">
  <h1 style="margin-left: 2vw;">Mobile Visits</h1>
</div>

<div style="height: 75vh; overflow: auto;">
  <table id="mobilevisits" class="table table-striped table-bordered" width="100%" cellspacing="0">
    <thead>
    <tr>
      <th style="width: 10%;border-right: 1px solid #ffffff; text-align: center;background-color: #006495; color: #FFFFFF;">Visit Coordinator</th>
      <th style="width: 15%;border-right: 1px solid #ffffff; text-align: center;background-color: #006495; color: #FFFFFF;">Visit Date</th>
      <th style="width: 10%;border-right: 1px solid #ffffff; text-align: center;background-color: #006495; color: #FFFFFF;">Number of Items</th>
      <th style="width: 20%;border-right: 1px solid #ffffff; text-align: center;background-color: #006495; color: #FFFFFF;">Actions</th>
    </tr>
    </thead>

    <tbody>
    <% (@visits || []).each do |visit| %>
        <tr>
          <td><%= visit.coordinator rescue "" %></td>
          <td><%= visit.visit_date.strftime("%d %b, %Y") %></td>
          <td><%= visit.products %></td>
          <td>
            <div style="display: table-row; width: 100%;">
              <div style="display: table-cell;width: 50%;text-align: center;">
                <a href="/mobile_visit/<%= visit.id %>/edit">
                  <img style="margin-left: 1vw;margin-right: 1vw" src="/assets/edit.png" title="Edit Visit">
                </a>
              </div>
              <div style="display: table-cell;width: 50%;text-align: center;">
                <a href="/mobile_visit/<%= visit.id %>">
                  <img style="margin-left: 1vw;margin-right: 1vw" src="/assets/view.png"  title="View Visit">
                </a>
              </div>
              <div style="display: table-cell;text-align: center;">
                <img src="/assets/delete.png" title="Void Visit"
                     onmousedown="confirmAction('/void_mobile_visit/<%= visit.id %>', 'Are you Sure?')">
              </div>
            </div>
          </td>
        </tr>
    <% end %>

    </tbody>
  </table>
</div>

<div class="footer" >
  <button onmousedown="window.location = '/'" class="bttn bttn-success bttn-lg gradient" style="margin-top: 1vh;height: 8vh;margin-right: 2vh;float: right;" type="button">Finish</button>
  <button onmousedown="window.location = '/mobile_visit/new'" class="bttn bttn-primary bttn-lg gradient" style="margin-top: 1vh;height: 8vh;margin-right: 2vh;float: right;" type="button">Create Visit</button>
</div>

<div id="keypad">
          <span class="keypad">
          </span>

</div>
